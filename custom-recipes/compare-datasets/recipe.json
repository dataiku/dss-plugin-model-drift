{
    "meta": {
        "label": "Compute drift between two datasets",
        "description": "Measure a potential drift between two datasets",
        "icon": "icon-puzzle-piece",
        "displayOrderRank": 3
    },

    "selectableFromDataset": "original",
    "kind": "PYTHON",
    "inputRoles" : [
        {
            "name": "original",
            "label": "Reference dataset",
            "description": "",
            "arity": "UNARY",
            "required": true,
            "acceptsDataset": true
        },
        {
            "name": "new",
            "label": "New dataset",
            "description": "",
            "arity": "UNARY",
            "required": true,
            "acceptsDataset": true
        }
    ],

    "outputRoles" : [
        {
            "name": "main_output",
            "label": "Metrics dataset",
            "description": "Dataset storing drift metrics",
            "arity": "UNARY",
            "required": true,
            "acceptsDataset": true
        }
    ],

    "params": [
        {
            "name": "prediction_column_available",
            "label": "Prediction column available",
            "description": "Use this option if your data is used for a ML task and has a column with predictions",
            "type": "BOOLEAN"
        },
        {
            "name": "metric_list_without_prediction",
            "label": "Metrics",
            "type": "MULTISELECT",
            "selectChoices": [
                { "value": "drift_score", "label": "Drift score"},
                { "value": "feature_importance", "label": "Feature importance"}
            ],
            "defaultValue": ["drift_score"],
            "visibilityCondition": "!model.prediction_column_available"
        },
        {
            "name": "metric_list_with_prediction",
            "label": "Metrics",
            "type": "MULTISELECT",
            "selectChoices": [
                { "value": "drift_score", "label": "Drift score"},
                { "value": "fugacity", "label": "Fugacity", "Description":  "Prediction density"},
                { "value": "feature_importance", "label":  "Feature importance"}
            ],
            "defaultValue": ["drift_score"],
            "visibilityCondition": "model.prediction_column_available"
        },
        {
            "name": "learning_task",
            "label": "Type of learning task",
            "type": "SELECT",
            "selectChoices": [
                {
                    "value": "CLASSIFICATION",
                    "label": "Classification"
                },
                {
                    "value": "REGRESSION",
                    "label": "Regression"
                }
            ],
            "defaultValue": "CLASSIFICATION",
            "visibilityCondition": "model.prediction_column_available"
        },
        {
            "name": "target_variable",
            "label" : "Prediction column",
            "type": "COLUMN",
            "mandatory" : true,
            "columnRole": "original",
            "visibilityCondition": "model.prediction_column_available"
        },
        {
            "name": "output_format",
            "label": "Output format",
            "type": "SELECT",
            "selectChoices": [
                {
                    "value": "single_column",
                    "label": "Single JSON column per metric"
                },
                {
                    "value": "multiple_columns",
                    "label": "Multiple columns per metric"
                }
            ],
            "defaultValue": "single_column",
            "visibilityCondition": "model.prediction_column_available"
        },
        {
            "name": "columns_to_remove",
            "label": "Columns to ignore",
            "type": "COLUMNS",
            "columnRole": "original"
        }
    ],
    "resourceKeys": []

}
